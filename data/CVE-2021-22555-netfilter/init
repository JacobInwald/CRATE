#!/bin/sh
mount -t devtmpfs none /dev
mount -t proc none /proc
mount -t sysfs none /sys
mknod -m 666 /dev/ttyS0 c 4 64

# Setup accounts
touch /etc/passwd
chmod 644 /etc/passwd
adduser jacob

chmod +x exploit.sh 
echo -e "\nBoot took $(cut -d' ' -f1 /proc/uptime) seconds\n"
echo -e "                                   _    __ _ _ _                                           "
echo -e "                                  | |  / _(_) | |                                          "
echo -e "                        _ __   ___| |_| |_ _| | |_ ___ _ __                                "
echo -e "                       | '_ \ / _ \ __|  _| | | __/ _ \ '__|                               "
echo -e "                       | | | |  __/ |_| | | | | ||  __/ |                                  "
echo -e "                       |_| |_|\___|\__|_| |_|_|\__\___|_|                                  \n"
                                                                                            
echo -e "[!] Welcome the the CVE-2021-22555 demo!\n"
echo -e "[!] To get started, run the following command:"
echo -e "# ./exploit\n"
echo -e "[!] You should see it run and then give you verification!\n"
echo -e "[!] Use Ctrl + A and then c then q to exit the screen session ...\n"
echo -e ""

setsid cttyhack sh
# setsid  cttyhack sh
# exec /bin/sh
